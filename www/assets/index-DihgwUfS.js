const i=new Set,s=new Map;let l,c="ltr",u="en";const g=typeof MutationObserver<"u"&&typeof document<"u"&&typeof document.documentElement<"u";if(g){const r=new MutationObserver(m);c=document.documentElement.dir||"ltr",u=document.documentElement.lang||navigator.language,r.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]})}function v(...r){r.map(e=>{const t=e.$code.toLowerCase();s.has(t)?s.set(t,Object.assign(Object.assign({},s.get(t)),e)):s.set(t,e),l||(l=e)}),m()}function m(){g&&(c=document.documentElement.dir||"ltr",u=document.documentElement.lang||navigator.language),[...i.keys()].map(r=>{typeof r.requestUpdate=="function"&&r.requestUpdate()})}let b=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){i.add(this.host)}hostDisconnected(){i.delete(this.host)}dir(){return`${this.host.dir||c}`.toLowerCase()}lang(){return`${this.host.lang||u}`.toLowerCase()}getTranslationData(e){var t,a;const n=new Intl.Locale(e.replace(/_/g,"-")),o=n?.language.toLowerCase(),d=(a=(t=n?.region)===null||t===void 0?void 0:t.toLowerCase())!==null&&a!==void 0?a:"",f=s.get(`${o}-${d}`),h=s.get(o);return{locale:n,language:o,region:d,primary:f,secondary:h}}exists(e,t){var a;const{primary:n,secondary:o}=this.getTranslationData((a=t.lang)!==null&&a!==void 0?a:this.lang());return t=Object.assign({includeFallback:!1},t),!!(n&&n[e]||o&&o[e]||t.includeFallback&&l&&l[e])}term(e,...t){const{primary:a,secondary:n}=this.getTranslationData(this.lang());let o;if(a&&a[e])o=a[e];else if(n&&n[e])o=n[e];else if(l&&l[e])o=l[e];else return console.error(`No translation found for: ${String(e)}`),String(e);return typeof o=="function"?o(...t):o}date(e,t){return e=new Date(e),new Intl.DateTimeFormat(this.lang(),t).format(e)}number(e,t){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(this.lang(),t).format(e)}relativeTime(e,t,a){return new Intl.RelativeTimeFormat(this.lang(),a).format(e,t)}};export{b as L,v as r};
