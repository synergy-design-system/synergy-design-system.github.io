function*c(t=document.activeElement){t!=null&&(yield t,"shadowRoot"in t&&t.shadowRoot&&t.shadowRoot.mode!=="closed"&&(yield*c(t.shadowRoot.activeElement)))}function p(){return[...c()].pop()}const u=new WeakMap;function d(t){let e=u.get(t);return e||(e=window.getComputedStyle(t,null),u.set(t,e)),e}function b(t){if(typeof t.checkVisibility=="function")return t.checkVisibility({checkOpacity:!1,checkVisibilityCSS:!0});const e=d(t);return e.visibility!=="hidden"&&e.display!=="none"}function f(t){const e=d(t),{overflowY:i,overflowX:o}=e;return i==="scroll"||o==="scroll"?!0:i!=="auto"||o!=="auto"?!1:t.scrollHeight>t.clientHeight&&i==="auto"||t.scrollWidth>t.clientWidth&&o==="auto"}function l(t){const e=t.tagName.toLowerCase(),i=Number(t.getAttribute("tabindex"));if(t.hasAttribute("tabindex")&&(isNaN(i)||i<=-1)||t.hasAttribute("disabled")||t.closest("[inert]"))return!1;if(e==="input"&&t.getAttribute("type")==="radio"){const r=t.getRootNode(),s=`input[type='radio'][name="${t.getAttribute("name")}"]`,a=r.querySelector(`${s}:checked`);return a?a===t:r.querySelector(s)===t}return b(t)?(e==="audio"||e==="video")&&t.hasAttribute("controls")||t.hasAttribute("tabindex")||t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"||["button","input","select","textarea","a","audio","video","summary","iframe"].includes(e)?!0:f(t):!1}function y(t){const e=g(t),i=e[0]??null,o=e[e.length-1]??null;return{start:i,end:o}}function h(t,e){return t.getRootNode({composed:!0})?.host!==e}function g(t){const e=new WeakMap,i=[];function o(n){if(n instanceof Element){if(n.hasAttribute("inert")||n.closest("[inert]")||e.has(n))return;e.set(n,!0),!i.includes(n)&&l(n)&&i.push(n),n instanceof HTMLSlotElement&&h(n,t)&&n.assignedElements({flatten:!0}).forEach(r=>{o(r)}),n.shadowRoot!==null&&n.shadowRoot.mode==="open"&&o(n.shadowRoot)}for(const r of n.children)o(r)}return o(t),i.sort((n,r)=>{const s=Number(n.getAttribute("tabindex"))||0;return(Number(r.getAttribute("tabindex"))||0)-s})}export{g as a,c as b,y as c,p as g};
