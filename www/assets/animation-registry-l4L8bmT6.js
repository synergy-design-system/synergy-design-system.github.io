function f(t,n,e){return new Promise(r=>{if(e?.duration===1/0)throw new Error("Promise-based animations must be finite.");const i=t.animate(n,{...e,duration:c()?0:e.duration});i.addEventListener("cancel",r,{once:!0}),i.addEventListener("finish",r,{once:!0})})}function m(t){return t=t.toString().toLowerCase(),t.indexOf("ms")>-1?parseFloat(t):t.indexOf("s")>-1?parseFloat(t)*1e3:parseFloat(t)}function c(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function d(t){return Promise.all(t.getAnimations().map(n=>new Promise(e=>{n.cancel(),requestAnimationFrame(e)})))}function g(t,n){return t.map(e=>({...e,height:e.height==="auto"?`${n}px`:e.height}))}const a=new Map,o=new WeakMap;function u(t){return t??{keyframes:[],options:{duration:0}}}function s(t,n){return n.toLowerCase()==="rtl"?{keyframes:t.rtlKeyframes||t.keyframes,options:t.options}:t}function p(t,n){a.set(t,u(n))}function A(t,n,e){o.set(t,{...o.get(t),[n]:u(e)})}function h(t,n,e){const r=o.get(t);if(r?.[n])return s(r[n],e.dir);const i=a.get(n);return i?s(i,e.dir):{keyframes:[],options:{duration:0}}}export{d as a,f as b,A as c,g as d,h as g,m as p,p as s};
